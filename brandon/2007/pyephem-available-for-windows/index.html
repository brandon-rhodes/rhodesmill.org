<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>PyEphem available for Windows!</title>
  <link rel="stylesheet" type="text/css" href="/brandon/styles.css" />
</head>
<body>

<p class="byline">
  by Brandon Rhodes
  • <a title="Home Page" href="/brandon/">Home</a>
</p>
<h1>PyEphem available for Windows!</h1>
<table class="docinfo" frame="void" rules="none">
<col class="docinfo-name" />
<col class="docinfo-content" />
<tbody valign="top">
<tr><th class="docinfo-name">Date:</th>
<td>9 November 2007</td></tr>
<tr class="field"><th class="docinfo-name">Tags:</th><td class="field-body">computing, pyephem, python</td>
</tr>
</tbody>
</table>

<p>
Over the years I have received many requests from frustrated Windows users, asking for a Windows-native version of my <a href="http://rhodesmill.org/pyephem/">PyEphem</a> astronomy library for Python. For most Windows users, an attempt to build the extension ends abruptly with the terrible and famous message:
</p>

<div class="highlight"><pre><span class="n">error</span><span class="o">:</span> <span class="n">Python</span> <span class="n">was</span> <span class="n">built</span> <span class="k">with</span> <span class="n">version</span> <span class="mf">7.1</span> <span class="n">of</span> <span class="n">Visual</span> <span class="n">Studio</span><span class="o">,</span> <span class="n">and</span> <span class="n">extensions</span> <span class="n">need</span> <span class="n">to</span> <span class="n">be</span> <span class="n">built</span> <span class="k">with</span> <span class="n">the</span> <span class="n">same</span> <span class="n">version</span> <span class="n">of</span> <span class="n">the</span> <span class="n">compiler</span><span class="o">,</span> <span class="n">but</span> <span class="n">it</span> <span class="n">isn</span><span class="err">&#39;</span><span class="n">t</span> <span class="n">installed</span><span class="o">.</span></pre></div>


<p>
And, as I myself do not have Visual Studio on the small Windows machine that I deign to own for the sake of my photo printer, I have never been able to offer my users much help. But earlier this year, a helpful PyEphem user named Jeff Kowalczyk emailed me a link to Philip von Weitershausen's post <a href="http://www.z3lab.org/sections/blogs/philipp-weitershausen/2007_07_26_cheap-binary-windows">“Cheap binary Windows eggs”</a>, which describes a method for building Python extensions using a freely available compiler.
</p>

<!--more-->

<p>
Aside from the difficulty that the Python setuptools ignored the <tt>pydistutils.cfg</tt> file he recommended, making it necessary for me to name the compiler on the command line, his instructions produced a PyEphem windows egg with only a few steps:
</p>

<ul>
<li>I installed <a href="http://www.python.org/download/windows/">Python for Windows</a>.</li>
<li>I installed the <a href="http://cheeseshop.python.org/pypi/setuptools/">setuptools package</a> using its Windows <tt class="docutils literal"><span class="pre">.exe</span></tt> installer (scroll down the page to find it).</li>
<li>I installed the <a href="http://www.mingw.org/">MinGW compiler</a>.</li>
<li>I installed <a href="http://gnuwin32.sourceforge.net/packages/libarchive.htm">LibArchive for Windows</a>.</li>
<li>I added to my Windows <tt class="docutils literal"><span class="pre">Path</span></tt>:
<div class="highlight"><pre><span class="nl">C:</span><span class="err">\</span><span class="n">Python25</span><span class="p">;</span><span class="n">C</span><span class="o">:</span><span class="err">\</span><span class="n">MingW</span><span class="err">\</span><span class="n">bin</span><span class="p">;</span><span class="n">C</span><span class="o">:</span><span class="err">\</span><span class="n">Program</span> <span class="n">Files</span><span class="err">\</span><span class="n">GnuWin32</span><span class="err">\</span><span class="n">bin</span></pre></div>

</li>
<li>I downloaded the <a href="http://rhodesmill.org/pyephem/">PyEphem</a> source archive.</li>
<li>I brought up a command window and ran:
<div class="highlight"><pre><span class="nl">C:</span><span class="err">\</span><span class="n">dev</span><span class="o">&gt;</span> <span class="n">bsdtar</span> <span class="o">-</span><span class="n">xf</span> <span class="n">pyephem</span><span class="o">-</span><span class="mf">3.7.2.1</span><span class="p">.</span><span class="n">tar</span><span class="p">.</span><span class="n">gz</span>
<span class="nl">C:</span><span class="err">\</span><span class="n">dev</span><span class="o">&gt;</span> <span class="n">cd</span> <span class="n">pyephem</span><span class="o">-</span><span class="mf">3.7.2.1</span>
<span class="nl">C:</span><span class="err">\</span><span class="n">dev</span><span class="err">\</span><span class="n">pyephem</span><span class="o">-</span><span class="mf">3.7.2.1</span><span class="o">&gt;</span> <span class="n">python</span> <span class="n">setup</span><span class="p">.</span><span class="n">py</span> <span class="n">build</span> <span class="o">--</span><span class="n">compiler</span><span class="o">=</span><span class="n">mingw32</span>
<span class="nl">C:</span><span class="err">\</span><span class="n">dev</span><span class="err">\</span><span class="n">pyephem</span><span class="o">-</span><span class="mf">3.7.2.1</span><span class="o">&gt;</span> <span class="n">python</span> <span class="n">setup</span><span class="p">.</span><span class="n">py</span> <span class="n">bdist_egg</span></pre></div>

</li>
<li>I uploaded the egg in the <tt>dist</tt> directory to the Cheese Shop.</li>
</ul>

<p>
Windows users will now find my Windows binary eggs on the <a href="http://pypi.python.org/pypi/pyephem/">Cheese Shop PyEphem entry</a>!
</p>

<p>
Always keep in mind that behind a small triumph like this one for a Free Software developer like myself stands a great mountain-mass of work by hundreds of others in the community. In this case one helpful user lead to one informative blog post which lead to a solid and available tool&nbsp;— MinGW&nbsp;— that is a descendant of the GCC compiler Richard Stallman himself started writing over twenty years ago! All of which allowed the delivery, to a new (and closed) platform, of my Python interface to <a href="http://www.clearskyinstitute.com/xephem/index.html">astronomy routines</a> which <a href="http://www.clearskyinstitute.com/resumes/ecdowney/resume.html">Elwood Charles Downey</a> has been maintaining for more than a quarter-century.
</p>

    <div id="disqus_thread"></div>
    <script type="text/javascript">
        var disqus_shortname = 'rhodesmill';
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
<p class="byline">©2020</p>

</body>
</html>
