<!doctype html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Earth Satellites — Skyfield documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/style.css">
  </head>
  <body>
    
    <p class="motto">
      <b>Skyfield:</b>
      <a href=".">Home</a>
      •
      <a href="toc.html">Table of Contents</a>
      •
      <a href="installation.html#changelog">Changelog</a>
      •
      <a href="api.html">API Reference</a>
    </p>
    
    <div class="section" id="earth-satellites">
<h1>Earth Satellites<a class="headerlink" href="#earth-satellites" title="Permalink to this headline">¶</a></h1>
<p>Skyfield is able to predict the position of an Earth satellite
by downloading the satellite’s standard SGP4 orbital elements.
Orbital elements are published by organizations like <a class="reference external" href="https://celestrak.org/">CelesTrak</a>.
Beware of these limitations:</p>
<ol class="arabic">
<li><p class="first">Don’t expect perfect agreement between
any two pieces of software that are trying to predict satellite positions.
As Vallado, Crawford, and Hujsak point out
in their crucial paper <a class="reference external" href="https://celestrak.org/publications/AIAA/2006-6753/">Revisiting Spacetrack Report #3</a>,
there are many different versions
of the basic satellite prediction algorithm circulating in the wild.
Skyfield uses the corrected and updated version of the algorithm
that they published in that report.</p>
</li>
<li><p class="first">Satellite orbital elements go rapidly out of date.
As explained below in <a class="reference internal" href="#tle-epoch"><span class="std std-ref">Checking an element set’s epoch</span></a>,
you will want to pay attention to the “epoch” date —
the date on which a particular element set is most accurate.
The element set might only be useful for a couple of weeks
to either side of its epoch.
For earlier dates,
you will want to pull old elements from an archive;
for later dates,
you will want to download a fresh set of elements.</p>
</li>
<li><p class="first">Satellite orbits don’t have perfect accuracy.
According to <a class="reference external" href="https://celestrak.org/publications/AIAA/2006-6753/">Revisiting Spacetrack Report #3</a>:</p>
<blockquote>
<div><p>“The maximum accuracy for a TLE is
limited by the number of decimal places in each field.
In general, TLE data is accurate to about a kilometer or so
at epoch and it quickly degrades.”</p>
</div></blockquote>
</li>
<li><p class="first">Given how close Earth satellites are to Earth,
there’s no point in calling the usual Skyfield
<a class="reference internal" href="api-position.html#skyfield.positionlib.Barycentric.observe" title="skyfield.positionlib.Barycentric.observe"><code class="xref py py-meth docutils literal notranslate"><span class="pre">observe()</span></code></a> method
that accounts for light-travel time.
As shown below, simple vector subtraction should work just as well.</p>
</li>
<li><p class="first">Finally, note that even though several satellite elements
have familiar names like <em>inclination</em> and <em>eccentricity</em>,
they are not simple Kepler elements,
and the SGP4 routine will not predict the same position
as a simple Kepler orbit would.</p>
</li>
</ol>
<div class="section" id="the-tle-format-and-its-rivals">
<span id="satellite-element-formats"></span><h2>The TLE format and its rivals<a class="headerlink" href="#the-tle-format-and-its-rivals" title="Permalink to this headline">¶</a></h2>
<p>Most folks download satellite element sets from CelesTrak:</p>
<p><a class="reference external" href="https://celestrak.org/NORAD/elements/index.php">https://celestrak.org/NORAD/elements/index.php</a></p>
<p>CelesTrak supports several data formats.
The original Two-Line Element ‘TLE’ format
describes a satellite orbit using two lines of dense ASCII text.
Whitespace is significant
because every character needs to be aligned in exactly the right column.
Here, for example, are elements for the International Space Station (ISS):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ISS</span> <span class="p">(</span><span class="n">ZARYA</span><span class="p">)</span>
<span class="mi">1</span> <span class="mi">25544</span><span class="n">U</span> <span class="mi">98067</span><span class="n">A</span>   <span class="mf">24127.82853009</span>  <span class="mf">.00015698</span>  <span class="mi">00000</span><span class="o">+</span><span class="mi">0</span>  <span class="mi">27310</span><span class="o">-</span><span class="mi">3</span> <span class="mi">0</span>  <span class="mi">9995</span>
<span class="mi">2</span> <span class="mi">25544</span>  <span class="mf">51.6393</span> <span class="mf">160.4574</span> <span class="mi">0003580</span> <span class="mf">140.6673</span> <span class="mf">205.7250</span> <span class="mf">15.50957674452123</span>
</pre></div>
</div>
<p>But CelesTrak also supports modern formats.
Here is the same element set in JSON format —
specifically, CelesTrak’s <code class="docutils literal notranslate"><span class="pre">FORMAT=json-pretty</span></code> format,
which adds indentation to make it easy to read;
use <code class="docutils literal notranslate"><span class="pre">FORMAT=json</span></code> if you don’t need the extra spaces and newlines:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[{</span>
    <span class="s2">&quot;OBJECT_NAME&quot;</span><span class="p">:</span> <span class="s2">&quot;ISS (ZARYA)&quot;</span><span class="p">,</span>
    <span class="s2">&quot;OBJECT_ID&quot;</span><span class="p">:</span> <span class="s2">&quot;1998-067A&quot;</span><span class="p">,</span>
    <span class="s2">&quot;EPOCH&quot;</span><span class="p">:</span> <span class="s2">&quot;2024-05-06T19:53:04.999776&quot;</span><span class="p">,</span>
    <span class="s2">&quot;MEAN_MOTION&quot;</span><span class="p">:</span> <span class="mf">15.50957674</span><span class="p">,</span>
    <span class="s2">&quot;ECCENTRICITY&quot;</span><span class="p">:</span> <span class="mf">0.000358</span><span class="p">,</span>
    <span class="s2">&quot;INCLINATION&quot;</span><span class="p">:</span> <span class="mf">51.6393</span><span class="p">,</span>
    <span class="s2">&quot;RA_OF_ASC_NODE&quot;</span><span class="p">:</span> <span class="mf">160.4574</span><span class="p">,</span>
    <span class="s2">&quot;ARG_OF_PERICENTER&quot;</span><span class="p">:</span> <span class="mf">140.6673</span><span class="p">,</span>
    <span class="s2">&quot;MEAN_ANOMALY&quot;</span><span class="p">:</span> <span class="mf">205.725</span><span class="p">,</span>
    <span class="s2">&quot;EPHEMERIS_TYPE&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;CLASSIFICATION_TYPE&quot;</span><span class="p">:</span> <span class="s2">&quot;U&quot;</span><span class="p">,</span>
    <span class="s2">&quot;NORAD_CAT_ID&quot;</span><span class="p">:</span> <span class="mi">25544</span><span class="p">,</span>
    <span class="s2">&quot;ELEMENT_SET_NO&quot;</span><span class="p">:</span> <span class="mi">999</span><span class="p">,</span>
    <span class="s2">&quot;REV_AT_EPOCH&quot;</span><span class="p">:</span> <span class="mi">45212</span><span class="p">,</span>
    <span class="s2">&quot;BSTAR&quot;</span><span class="p">:</span> <span class="mf">0.0002731</span><span class="p">,</span>
    <span class="s2">&quot;MEAN_MOTION_DOT&quot;</span><span class="p">:</span> <span class="mf">0.00015698</span><span class="p">,</span>
    <span class="s2">&quot;MEAN_MOTION_DDOT&quot;</span><span class="p">:</span> <span class="mi">0</span>
<span class="p">}]</span>
</pre></div>
</div>
<p>And here are the same elements with <code class="docutils literal notranslate"><span class="pre">FORMAT=CSV</span></code>
(this is only two lines of text,
but your browser will probably wrap them
to fit your screen):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OBJECT_NAME</span><span class="p">,</span><span class="n">OBJECT_ID</span><span class="p">,</span><span class="n">EPOCH</span><span class="p">,</span><span class="n">MEAN_MOTION</span><span class="p">,</span><span class="n">ECCENTRICITY</span><span class="p">,</span><span class="n">INCLINATION</span><span class="p">,</span><span class="n">RA_OF_ASC_NODE</span><span class="p">,</span><span class="n">ARG_OF_PERICENTER</span><span class="p">,</span><span class="n">MEAN_ANOMALY</span><span class="p">,</span><span class="n">EPHEMERIS_TYPE</span><span class="p">,</span><span class="n">CLASSIFICATION_TYPE</span><span class="p">,</span><span class="n">NORAD_CAT_ID</span><span class="p">,</span><span class="n">ELEMENT_SET_NO</span><span class="p">,</span><span class="n">REV_AT_EPOCH</span><span class="p">,</span><span class="n">BSTAR</span><span class="p">,</span><span class="n">MEAN_MOTION_DOT</span><span class="p">,</span><span class="n">MEAN_MOTION_DDOT</span>
<span class="n">ISS</span> <span class="p">(</span><span class="n">ZARYA</span><span class="p">),</span><span class="mi">1998</span><span class="o">-</span><span class="mi">067</span><span class="n">A</span><span class="p">,</span><span class="mi">2024</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">06</span><span class="n">T19</span><span class="p">:</span><span class="mi">53</span><span class="p">:</span><span class="mf">04.999776</span><span class="p">,</span><span class="mf">15.50957674</span><span class="p">,</span><span class="mf">.000358</span><span class="p">,</span><span class="mf">51.6393</span><span class="p">,</span><span class="mf">160.4574</span><span class="p">,</span><span class="mf">140.6673</span><span class="p">,</span><span class="mf">205.7250</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="n">U</span><span class="p">,</span><span class="mi">25544</span><span class="p">,</span><span class="mi">999</span><span class="p">,</span><span class="mi">45212</span><span class="p">,</span><span class="mf">.2731E-3</span><span class="p">,</span><span class="mf">.15698E-3</span><span class="p">,</span><span class="mi">0</span>
</pre></div>
</div>
<p>Note these differences:</p>
<ul class="simple">
<li>Even though today the JSON and CSV formats
carry exactly the same data as the TLE —
for example, all three of the examples above
give the inclination as 51.6393°,
with four digits past the decimal point —
both JSON and CSV will be able to carry greater precision in the future.
The old TLE format, by contrast,
will never be able to add more decimal places
because each element has a fixed-width number of characters.</li>
<li>The TLE format has run out of simple integer catalog numbers,
because it limits the catalog number
(in the above example, <code class="docutils literal notranslate"><span class="pre">25544</span></code>)
to 5&nbsp;digits.
The JSON and CSV formats, by contrast,
don’t place a limit on the size of the catalog number.</li>
<li>The JSON and CSV formats are self-documenting.
You can tell, even as a first-time reader,
which element is the inclination.
The old TLE lines provide no hint about which element is which.</li>
<li>The TLE and CSV formats are both very efficient,
and describe an orbit using about 150&nbsp;characters.
Yes, the CSV file has that big 225-character header at the top;
but the header line only appears once,
no matter how many satellites are listed after it.
By contrast,
the bulky JSON format requires more than 400&nbsp;characters per satellite
because the element names need to be repeated again every time.</li>
</ul>
<p>There are more obscure formats in use at CelesTrak,
including a ‘key-value notation (KVN)’ and an unfortunate&nbsp;XML format,
but here we will focus on the mainstream formats listed above.</p>
<div class="section" id="downloading-satellite-elements">
<h3>Downloading satellite elements<a class="headerlink" href="#downloading-satellite-elements" title="Permalink to this headline">¶</a></h3>
<p>Whether you choose one of CelesTrak’s
<a class="reference external" href="https://celestrak.org/NORAD/elements/">pre-packaged satellite lists</a>
like ‘Space Stations’ or ‘CubeSats’,
or perform a
<a class="reference external" href="https://celestrak.org/NORAD/documentation/gp-data-formats.php">query for a particular satellite</a>,
there are three issues to beware of:</p>
<ul class="simple">
<li>Be sure to save the data to a file the first time your script runs,
so that subsequent runs won’t need to download the same data again.
This is crucial to reducing the load on the CelesTrak servers
and helping them continue to provide CelesTrak as a free service.</li>
<li>Satellite elements gradually go out of date.
Once a file is a few days old,
you will probably want to download the file again.</li>
<li>The CelesTrak data URLs all use the exact same filename.
So if you download the ‘Space Stations’
whose URL looks like <code class="docutils literal notranslate"><span class="pre">gp.php?GROUP=stations</span></code>,
and then the ‘CubeSats’ with <code class="docutils literal notranslate"><span class="pre">gp.php?GROUP=cubesat</span></code>,
then Skyfield will save them to the same filename <code class="docutils literal notranslate"><span class="pre">gp.php</span></code>
and the CubeSats will wind up overwriting the Space Stations.
To avoid this, use the <code class="docutils literal notranslate"><span class="pre">filename=</span></code> optional argument
to create a separate local file for each remote URL.</li>
</ul>
<p>Here’s a useful pattern for downloading element sets with Skyfield:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">skyfield.api</span> <span class="kn">import</span> <span class="n">load</span>

<span class="n">max_days</span> <span class="o">=</span> <span class="mf">7.0</span>         <span class="c1"># download again once 7 days old</span>
<span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;stations.csv&#39;</span>  <span class="c1"># custom filename, not &#39;gp.php&#39;</span>

<span class="n">base</span> <span class="o">=</span> <span class="s1">&#39;https://celestrak.org/NORAD/elements/gp.php&#39;</span>
<span class="n">url</span> <span class="o">=</span> <span class="n">base</span> <span class="o">+</span> <span class="s1">&#39;?GROUP=stations&amp;FORMAT=csv&#39;</span>

<span class="k">if</span> <span class="ow">not</span> <span class="n">load</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="ow">or</span> <span class="n">load</span><span class="o">.</span><span class="n">days_old</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="n">max_days</span><span class="p">:</span>
    <span class="n">load</span><span class="o">.</span><span class="n">download</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="n">name</span><span class="p">)</span>
</pre></div>
</div>
<p>The next section will illustrate how to load satellites
once you have downloaded the file.</p>
<p>If your project is serious enough
that you will need to be able to double-check and replicate old results later,
then don’t follow this example —
every time the file gets too old,
this code will overwrite the file with new data.
Instead, you will probably want to put the date in the filename,
and archive each file along with your project’s code.</p>
</div>
<div class="section" id="loading-satellite-elements-1">
<span id="loading-satellite-elements"></span><h3>Loading satellite elements<a class="headerlink" href="#loading-satellite-elements-1" title="Permalink to this headline">¶</a></h3>
<p>Once you have downloaded a file of elements,
use one of these patterns to load them into Skyfield.
For the traditional TLE format:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">skyfield.api</span> <span class="kn">import</span> <span class="n">load</span>
<span class="kn">from</span> <span class="nn">skyfield.iokit</span> <span class="kn">import</span> <span class="n">parse_tle_file</span>

<span class="n">ts</span> <span class="o">=</span> <span class="n">load</span><span class="o">.</span><span class="n">timescale</span><span class="p">()</span>

<span class="k">with</span> <span class="n">load</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s1">&#39;stations.tle&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">satellites</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">parse_tle_file</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">ts</span><span class="p">))</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Loaded&#39;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">satellites</span><span class="p">),</span> <span class="s1">&#39;satellites&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Loaded 27 satellites
</pre></div>
</div>
<p>For the verbose but easy-to-read JSON format:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">json</span>
<span class="kn">from</span> <span class="nn">skyfield.api</span> <span class="kn">import</span> <span class="n">EarthSatellite</span><span class="p">,</span> <span class="n">load</span>

<span class="k">with</span> <span class="n">load</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s1">&#39;stations.json&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>

<span class="n">ts</span> <span class="o">=</span> <span class="n">load</span><span class="o">.</span><span class="n">timescale</span><span class="p">()</span>
<span class="n">sats</span> <span class="o">=</span> <span class="p">[</span><span class="n">EarthSatellite</span><span class="o">.</span><span class="n">from_omm</span><span class="p">(</span><span class="n">ts</span><span class="p">,</span> <span class="n">fields</span><span class="p">)</span> <span class="k">for</span> <span class="n">fields</span> <span class="ow">in</span> <span class="n">data</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Loaded&#39;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">sats</span><span class="p">),</span> <span class="s1">&#39;satellites&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Loaded 27 satellites
</pre></div>
</div>
<p>For the more compact CSV format:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">csv</span>
<span class="kn">from</span> <span class="nn">skyfield.api</span> <span class="kn">import</span> <span class="n">EarthSatellite</span><span class="p">,</span> <span class="n">load</span>

<span class="k">with</span> <span class="n">load</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s1">&#39;stations.csv&#39;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">data</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">csv</span><span class="o">.</span><span class="n">DictReader</span><span class="p">(</span><span class="n">f</span><span class="p">))</span>

<span class="n">ts</span> <span class="o">=</span> <span class="n">load</span><span class="o">.</span><span class="n">timescale</span><span class="p">()</span>
<span class="n">sats</span> <span class="o">=</span> <span class="p">[</span><span class="n">EarthSatellite</span><span class="o">.</span><span class="n">from_omm</span><span class="p">(</span><span class="n">ts</span><span class="p">,</span> <span class="n">fields</span><span class="p">)</span> <span class="k">for</span> <span class="n">fields</span> <span class="ow">in</span> <span class="n">data</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Loaded&#39;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">sats</span><span class="p">),</span> <span class="s1">&#39;satellites&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Loaded 27 satellites
</pre></div>
</div>
<p>In each case,
you are asked to provide a <code class="docutils literal notranslate"><span class="pre">ts</span></code> timescale.
Why?
Because Skyfield needs the timescale’s knowledge of leap seconds
to turn each satellite’s epoch date
into an <code class="docutils literal notranslate"><span class="pre">.epoch</span></code> <a class="reference internal" href="api-time.html#skyfield.timelib.Time" title="skyfield.timelib.Time"><code class="xref py py-class docutils literal notranslate"><span class="pre">Time</span></code></a> object.</p>
</div>
<div class="section" id="loading-satellite-data-from-a-string">
<h3>Loading satellite data from a string<a class="headerlink" href="#loading-satellite-data-from-a-string" title="Permalink to this headline">¶</a></h3>
<p>If your program has already loaded TLE, JSON, or CSV data into memory
and doesn’t need to read it over again from a file,
you can make the string behave like a file
by wrapping it in a Python I/O object:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># For TLE and JSON:</span>

<span class="kn">from</span> <span class="nn">io</span> <span class="kn">import</span> <span class="n">BytesIO</span>
<span class="n">f</span> <span class="o">=</span> <span class="n">BytesIO</span><span class="p">(</span><span class="n">byte_string</span><span class="p">)</span>

<span class="c1"># For CSV:</span>

<span class="kn">from</span> <span class="nn">io</span> <span class="kn">import</span> <span class="n">StringIO</span>
<span class="n">f</span> <span class="o">=</span> <span class="n">StringIO</span><span class="p">(</span><span class="n">text_string</span><span class="p">)</span>
</pre></div>
</div>
<p>You can then use the resulting file object <code class="docutils literal notranslate"><span class="pre">f</span></code>
with the example code in the previous section.</p>
</div>
<div class="section" id="indexing-satellites-by-name-or-number">
<h3>Indexing satellites by name or number<a class="headerlink" href="#indexing-satellites-by-name-or-number" title="Permalink to this headline">¶</a></h3>
<p>If you want to operate on every satellite
in the list that you have loaded from a file,
you can use Python’s <code class="docutils literal notranslate"><span class="pre">for</span></code> loop.
But if you instead want to select individual satellites by name or number,
try building a lookup dictionary
using Python’s dictionary comprehension syntax:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">by_name</span> <span class="o">=</span> <span class="p">{</span><span class="n">sat</span><span class="o">.</span><span class="n">name</span><span class="p">:</span> <span class="n">sat</span> <span class="k">for</span> <span class="n">sat</span> <span class="ow">in</span> <span class="n">satellites</span><span class="p">}</span>
<span class="n">satellite</span> <span class="o">=</span> <span class="n">by_name</span><span class="p">[</span><span class="s1">&#39;ISS (ZARYA)&#39;</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">satellite</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ISS (ZARYA) catalog #25544 epoch 2024-05-09 08:48:20 UTC
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">by_number</span> <span class="o">=</span> <span class="p">{</span><span class="n">sat</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">satnum</span><span class="p">:</span> <span class="n">sat</span> <span class="k">for</span> <span class="n">sat</span> <span class="ow">in</span> <span class="n">satellites</span><span class="p">}</span>
<span class="n">satellite</span> <span class="o">=</span> <span class="n">by_number</span><span class="p">[</span><span class="mi">25544</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">satellite</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ISS (ZARYA) catalog #25544 epoch 2024-05-09 08:48:20 UTC
</pre></div>
</div>
</div>
<div class="section" id="loading-a-single-tle-set-from-strings">
<h3>Loading a single TLE set from strings<a class="headerlink" href="#loading-a-single-tle-set-from-strings" title="Permalink to this headline">¶</a></h3>
<p>If your program already has the two lines of TLE data for a satellite
and doesn’t need Skyfield to download and parse a CelesTrak file,
you can instantiate an <a class="reference internal" href="api-satellites.html#skyfield.sgp4lib.EarthSatellite" title="skyfield.sgp4lib.EarthSatellite"><code class="xref py py-class docutils literal notranslate"><span class="pre">EarthSatellite</span></code></a> directly.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">skyfield.api</span> <span class="kn">import</span> <span class="n">EarthSatellite</span>

<span class="n">ts</span> <span class="o">=</span> <span class="n">load</span><span class="o">.</span><span class="n">timescale</span><span class="p">()</span>
<span class="n">line1</span> <span class="o">=</span> <span class="s1">&#39;1 25544U 98067A   14020.93268519  .00009878  00000-0  18200-3 0  5082&#39;</span>
<span class="n">line2</span> <span class="o">=</span> <span class="s1">&#39;2 25544  51.6498 109.4756 0003572  55.9686 274.8005 15.49815350868473&#39;</span>
<span class="n">satellite</span> <span class="o">=</span> <span class="n">EarthSatellite</span><span class="p">(</span><span class="n">line1</span><span class="p">,</span> <span class="n">line2</span><span class="p">,</span> <span class="s1">&#39;ISS (ZARYA)&#39;</span><span class="p">,</span> <span class="n">ts</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">satellite</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ISS (ZARYA) catalog #25544 epoch 2014-01-20 22:23:04 UTC
</pre></div>
</div>
</div>
</div>
<div class="section" id="checking-an-element-sets-epoch">
<span id="tle-epoch"></span><h2>Checking an element set’s epoch<a class="headerlink" href="#checking-an-element-sets-epoch" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">.epoch</span></code> time of a satellite element set
is the date and time on which the element set is most accurate.
Before or after that date,
the element set will be less accurate.
The epoch is a Skyfield <a class="reference internal" href="api-time.html#skyfield.timelib.Time" title="skyfield.timelib.Time"><code class="xref py py-class docutils literal notranslate"><span class="pre">Time</span></code></a> object:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">satellite</span><span class="o">.</span><span class="n">epoch</span><span class="o">.</span><span class="n">utc_jpl</span><span class="p">())</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>A.D. 2014-Jan-20 22:23:04.0004 UTC
</pre></div>
</div>
<p>If the epoch is too far in the past,
you can provide <a class="reference internal" href="api-iokit.html#skyfield.iokit.Loader.tle_file" title="skyfield.iokit.Loader.tle_file"><code class="xref py py-meth docutils literal notranslate"><span class="pre">tle_file()</span></code></a>
with the <code class="docutils literal notranslate"><span class="pre">reload</span></code> option to force it to download new elements
even if the file is already on disk.
(Note, though, that there is no guarantee that the new elements
will be up-to-date if the source file is not frequently updated
for the satellite you are interested in —
so this pattern might make you download a new file on each run
until the satellite’s elements are finally updated.)</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">t</span> <span class="o">=</span> <span class="n">ts</span><span class="o">.</span><span class="n">utc</span><span class="p">(</span><span class="mi">2014</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span>

<span class="n">days</span> <span class="o">=</span> <span class="n">t</span> <span class="o">-</span> <span class="n">satellite</span><span class="o">.</span><span class="n">epoch</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:.3f}</span><span class="s1"> days away from epoch&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">days</span><span class="p">))</span>

<span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">days</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">14</span><span class="p">:</span>
    <span class="n">satellites</span> <span class="o">=</span> <span class="n">load</span><span class="o">.</span><span class="n">tle_file</span><span class="p">(</span><span class="n">stations_url</span><span class="p">,</span> <span class="n">reload</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>2.538 days away from epoch
</pre></div>
</div>
<p>You can read <a class="reference external" href="https://twitter.com/TSKelso">T.S.&nbsp;Kelso</a> on Twitter
to follow along with the drama
as various satellite element sets go out-of-date each month
and await updates from their respective organizations.</p>
</div>
<div class="section" id="historical-satellite-element-sets">
<h2>Historical satellite element sets<a class="headerlink" href="#historical-satellite-element-sets" title="Permalink to this headline">¶</a></h2>
<p>To repeat the warning in the previous section:
any particular satellite TLE set
is only valid for a couple of weeks to either side of that TLE’s epoch.</p>
<p>That limitation unfortunately applies to the past as well as to the future.
Just as today’s TLE for a satellite
can only help you predict its position for a few weeks into the future,
it will also be accurate for only a few weeks into the past.
Whether the satellite has been performing active maneuvers,
or merely coasting amidst the unpredictable magnetic fields
and atmospheric drag of the near-Earth environment,
a current TLE cannot predict the satellite’s position
on a date in the distant past.</p>
<p>If you lack access to an archive of old TLE files,
try searching the Internet Archive’s “Wayback Machine”:</p>
<p><a class="reference external" href="https://archive.org/web/">https://archive.org/web/</a></p>
<p>Supply the URL of the current satellite catalog you downloaded
and click “Browse History”
and the Archive will display a calendar
indicating whether any earlier versions of that same satellite catalog
are in their archive.
If so, then you should be able to download them to your machine
and use them when you need historic satellite positions
close to the old TLE’s epoch date.</p>
</div>
<div class="section" id="finding-when-a-satellite-rises-and-sets">
<span id="satellite-rising-and-setting"></span><h2>Finding when a satellite rises and sets<a class="headerlink" href="#finding-when-a-satellite-rises-and-sets" title="Permalink to this headline">¶</a></h2>
<p>Skyfield can search between a start time and an end time
for each occasion on which a satellite’s altitude
exceeds a specified number of degrees above the horizon.
For example,
here is how to determine
how many times our example satellite rises above 30° of altitude
over the span of a single day:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">skyfield.api</span> <span class="kn">import</span> <span class="n">wgs84</span>

<span class="n">bluffton</span> <span class="o">=</span> <span class="n">wgs84</span><span class="o">.</span><span class="n">latlon</span><span class="p">(</span><span class="o">+</span><span class="mf">40.8939</span><span class="p">,</span> <span class="o">-</span><span class="mf">83.8917</span><span class="p">)</span>
<span class="n">t0</span> <span class="o">=</span> <span class="n">ts</span><span class="o">.</span><span class="n">utc</span><span class="p">(</span><span class="mi">2014</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">23</span><span class="p">)</span>
<span class="n">t1</span> <span class="o">=</span> <span class="n">ts</span><span class="o">.</span><span class="n">utc</span><span class="p">(</span><span class="mi">2014</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">24</span><span class="p">)</span>
<span class="n">t</span><span class="p">,</span> <span class="n">events</span> <span class="o">=</span> <span class="n">satellite</span><span class="o">.</span><span class="n">find_events</span><span class="p">(</span><span class="n">bluffton</span><span class="p">,</span> <span class="n">t0</span><span class="p">,</span> <span class="n">t1</span><span class="p">,</span> <span class="n">altitude_degrees</span><span class="o">=</span><span class="mf">30.0</span><span class="p">)</span>
<span class="n">event_names</span> <span class="o">=</span> <span class="s1">&#39;rise above 30°&#39;</span><span class="p">,</span> <span class="s1">&#39;culminate&#39;</span><span class="p">,</span> <span class="s1">&#39;set below 30°&#39;</span>
<span class="k">for</span> <span class="n">ti</span><span class="p">,</span> <span class="n">event</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">events</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">event_names</span><span class="p">[</span><span class="n">event</span><span class="p">]</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">ti</span><span class="o">.</span><span class="n">utc_strftime</span><span class="p">(</span><span class="s1">&#39;%Y %b </span><span class="si">%d</span><span class="s1"> %H:%M:%S&#39;</span><span class="p">),</span> <span class="n">name</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>2014 Jan 23 06:25:37 rise above 30°
2014 Jan 23 06:26:58 culminate
2014 Jan 23 06:28:19 set below 30°
2014 Jan 23 12:54:56 rise above 30°
2014 Jan 23 12:56:27 culminate
2014 Jan 23 12:57:58 set below 30°
</pre></div>
</div>
<p>The satellite’s altitude exceeded 30° twice.
For each such occasion,
the method <a class="reference internal" href="api-satellites.html#skyfield.sgp4lib.EarthSatellite.find_events" title="skyfield.sgp4lib.EarthSatellite.find_events"><code class="xref py py-meth docutils literal notranslate"><span class="pre">find_events()</span></code></a>
has determined not only the moment of greatest altitude —
accurate to within a second or so —
but also the time at which the satellite first crested 30°
and the moment at which it dipped below it.</p>
<p>Beware that events might not always be in the order rise-culminate-set.
Some satellites culminate several times between rising and setting.</p>
<p>By combining these results
with the result of the <a class="reference internal" href="api-position.html#skyfield.positionlib.ICRF.is_sunlit" title="skyfield.positionlib.ICRF.is_sunlit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">is_sunlit()</span></code></a> method
(as described below in <a class="reference internal" href="#satellite-is-sunlit"><span class="std std-ref">Find when a satellite is in sunlight</span></a>),
you can determine whether the satellite is in sunlight
during these passes,
or is eclipsed within the Earth’s shadow.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">eph</span> <span class="o">=</span> <span class="n">load</span><span class="p">(</span><span class="s1">&#39;de421.bsp&#39;</span><span class="p">)</span>
<span class="n">sunlit</span> <span class="o">=</span> <span class="n">satellite</span><span class="o">.</span><span class="n">at</span><span class="p">(</span><span class="n">t</span><span class="p">)</span><span class="o">.</span><span class="n">is_sunlit</span><span class="p">(</span><span class="n">eph</span><span class="p">)</span>

<span class="k">for</span> <span class="n">ti</span><span class="p">,</span> <span class="n">event</span><span class="p">,</span> <span class="n">sunlit_flag</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">events</span><span class="p">,</span> <span class="n">sunlit</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">event_names</span><span class="p">[</span><span class="n">event</span><span class="p">]</span>
    <span class="n">state</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;in shadow&#39;</span><span class="p">,</span> <span class="s1">&#39;in sunlight&#39;</span><span class="p">)[</span><span class="n">sunlit_flag</span><span class="p">]</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:22}</span><span class="s1"> </span><span class="si">{:15}</span><span class="s1"> </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
        <span class="n">ti</span><span class="o">.</span><span class="n">utc_strftime</span><span class="p">(</span><span class="s1">&#39;%Y %b </span><span class="si">%d</span><span class="s1"> %H:%M:%S&#39;</span><span class="p">),</span> <span class="n">name</span><span class="p">,</span> <span class="n">state</span><span class="p">,</span>
    <span class="p">))</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>2014 Jan 23 06:25:37   rise above 30°  in shadow
2014 Jan 23 06:26:58   culminate       in shadow
2014 Jan 23 06:28:19   set below 30°   in shadow
2014 Jan 23 12:54:56   rise above 30°  in sunlight
2014 Jan 23 12:56:27   culminate       in sunlight
2014 Jan 23 12:57:58   set below 30°   in sunlight
</pre></div>
</div>
<p>Finally, you will probably want to check the altitude of the Sun,
so that you can ignore passes that happen during the daytime —
unless you have some means of observing the satellite
(by radio, for example) before it gets dark outside.</p>
</div>
<div class="section" id="generating-a-satellite-position">
<h2>Generating a satellite position<a class="headerlink" href="#generating-a-satellite-position" title="Permalink to this headline">¶</a></h2>
<p>Once Skyfield has identified the times
at which a particular satellite is overhead,
you will probably want to learn more about its position at those times.</p>
<p>The simplest form in which you can generate a satellite position
is to call its <code class="docutils literal notranslate"><span class="pre">at()</span></code> method,
which will return an (<em>x,y,z</em>) position relative to the Earth’s center
in the Geocentric Celestial Reference System.
(GCRS coordinates are based on even more precise axes
than those of the old J2000 system.)</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># You can instead use ts.now() for the current time</span>
<span class="n">t</span> <span class="o">=</span> <span class="n">ts</span><span class="o">.</span><span class="n">utc</span><span class="p">(</span><span class="mi">2014</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span>

<span class="n">geocentric</span> <span class="o">=</span> <span class="n">satellite</span><span class="o">.</span><span class="n">at</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">geocentric</span><span class="o">.</span><span class="n">xyz</span><span class="o">.</span><span class="n">km</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[-3918.87650458 -1887.64838745  5209.08801512]
</pre></div>
</div>
</div>
<div class="section" id="satellite-latitude-longitude-and-height">
<h2>Satellite latitude, longitude, and height<a class="headerlink" href="#satellite-latitude-longitude-and-height" title="Permalink to this headline">¶</a></h2>
<p>Once you have computed a geocentric satellite position,
you can use either of several <a class="reference internal" href="api-topos.html#skyfield.toposlib.wgs84" title="skyfield.toposlib.wgs84"><code class="xref py py-data docutils literal notranslate"><span class="pre">wgs84</span></code></a> object methods
to learn the satellite’s latitude, longitude, and height:</p>
<ul class="simple">
<li><a class="reference internal" href="api-topos.html#skyfield.toposlib.Geoid.latlon_of" title="skyfield.toposlib.Geoid.latlon_of"><code class="xref py py-meth docutils literal notranslate"><span class="pre">latlon_of()</span></code></a></li>
<li><a class="reference internal" href="api-topos.html#skyfield.toposlib.Geoid.height_of" title="skyfield.toposlib.Geoid.height_of"><code class="xref py py-meth docutils literal notranslate"><span class="pre">height_of()</span></code></a></li>
<li><a class="reference internal" href="api-topos.html#skyfield.toposlib.Geoid.geographic_position_of" title="skyfield.toposlib.Geoid.geographic_position_of"><code class="xref py py-meth docutils literal notranslate"><span class="pre">geographic_position_of()</span></code></a></li>
</ul>
<p>For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">lat</span><span class="p">,</span> <span class="n">lon</span> <span class="o">=</span> <span class="n">wgs84</span><span class="o">.</span><span class="n">latlon_of</span><span class="p">(</span><span class="n">geocentric</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Latitude:&#39;</span><span class="p">,</span> <span class="n">lat</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Longitude:&#39;</span><span class="p">,</span> <span class="n">lon</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Latitude: 50deg 14&#39; 37.4&quot;
Longitude: -86deg 23&#39; 23.3&quot;
</pre></div>
</div>
<p>Another <a class="reference internal" href="api-topos.html#skyfield.toposlib.wgs84" title="skyfield.toposlib.wgs84"><code class="xref py py-data docutils literal notranslate"><span class="pre">wgs84</span></code></a> method
computes the subpoint directly below the satellite —
the point on the Earth
with the same latitude and longitude as the satellite,
but with a height above the WGS84 ellipsoid of zero:</p>
<ul class="simple">
<li><a class="reference internal" href="api-topos.html#skyfield.toposlib.Geoid.subpoint_of" title="skyfield.toposlib.Geoid.subpoint_of"><code class="xref py py-meth docutils literal notranslate"><span class="pre">subpoint_of()</span></code></a></li>
</ul>
<p>If you want the actual position of the ground beneath the satellite,
you of course can’t assume that the position will be exactly at sea level.
You’ll need to find a geographic library
that lets you load a digital elevation model (DEM),
then build a subpoint manually using the elevation returned
for the satellite’s latitude and longitude.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">elevation_m</span> <span class="o">=</span> <span class="mf">123.0</span>
<span class="n">subpoint</span> <span class="o">=</span> <span class="n">wgs84</span><span class="o">.</span><span class="n">latlon</span><span class="p">(</span><span class="n">lat</span><span class="o">.</span><span class="n">degrees</span><span class="p">,</span> <span class="n">lon</span><span class="o">.</span><span class="n">degrees</span><span class="p">,</span> <span class="n">elevation_m</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="satellite-altitude-azimuth-and-distance">
<h2>Satellite altitude, azimuth, and distance<a class="headerlink" href="#satellite-altitude-azimuth-and-distance" title="Permalink to this headline">¶</a></h2>
<p>You might be most interested
in whether the satellite is above or below the horizon
from your own position as an observer,
and in which direction to look for it.
If you build an object to represent your latitude and longitude
(as we did when we created the <code class="docutils literal notranslate"><span class="pre">bluffton</span></code> object above),
you can use vector subtraction
to ask “where will the satellite be <em>relative to</em> my location?”</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">difference</span> <span class="o">=</span> <span class="n">satellite</span> <span class="o">-</span> <span class="n">bluffton</span>
</pre></div>
</div>
<p>Every time you call this vector sum’s <code class="docutils literal notranslate"><span class="pre">at()</span></code> method,
it will compute the satellite’s position,
then your own position,
then subtract them.
The result will be the position of the satellite relative
to you as an observer.
If you are interested you can access this relative position
as plain (<em>x,y,z</em>) coordinates:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">topocentric</span> <span class="o">=</span> <span class="n">difference</span><span class="o">.</span><span class="n">at</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">topocentric</span><span class="o">.</span><span class="n">xyz</span><span class="o">.</span><span class="n">km</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[ 331.61901192  392.18492744 1049.7597825 ]
</pre></div>
</div>
<p>But the most popular approach is to ask the topocentric position
for its altitude and azimuth.
The altitude angle runs from 0° at the horizon
to 90° directly overhead at the zenith.
A&nbsp;negative altitude means the satellite is that many degrees below the horizon.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">alt</span><span class="p">,</span> <span class="n">az</span><span class="p">,</span> <span class="n">distance</span> <span class="o">=</span> <span class="n">topocentric</span><span class="o">.</span><span class="n">altaz</span><span class="p">()</span>

<span class="k">if</span> <span class="n">alt</span><span class="o">.</span><span class="n">degrees</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;The ISS is above the horizon&#39;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Altitude:&#39;</span><span class="p">,</span> <span class="n">alt</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Azimuth:&#39;</span><span class="p">,</span> <span class="n">az</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Distance: </span><span class="si">{:.1f}</span><span class="s1"> km&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">distance</span><span class="o">.</span><span class="n">km</span><span class="p">))</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>The ISS is above the horizon
Altitude: 16deg 16&#39; 32.6&quot;
Azimuth: 350deg 15&#39; 20.4&quot;
Distance: 1168.7 km
</pre></div>
</div>
<p>The azimuth is measured clockwise around the horizon,
just like the degrees shown on a compass,
from geographic north&nbsp;(0°)
through east&nbsp;(90°), south&nbsp;(180°), and west&nbsp;(270°)
before returning to the north and rolling over from 359° back to&nbsp;0°.</p>
</div>
<div class="section" id="satellite-right-ascension-and-declination">
<h2>Satellite right ascension and declination<a class="headerlink" href="#satellite-right-ascension-and-declination" title="Permalink to this headline">¶</a></h2>
<p>If you are interested
in where among the stars the satellite will be positioned,
then — as with any other Skyfield position object —
you can ask for its right ascension and declination,
either relative to the fixed axes of the ICRF
or else in the dynamical coordinate system of the date you specify.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ra</span><span class="p">,</span> <span class="n">dec</span><span class="p">,</span> <span class="n">distance</span> <span class="o">=</span> <span class="n">topocentric</span><span class="o">.</span><span class="n">radec</span><span class="p">()</span>  <span class="c1"># ICRF (&quot;J2000&quot;)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">ra</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">dec</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>03h 19m 07.97s
+63deg 55&#39; 47.2&quot;
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ra</span><span class="p">,</span> <span class="n">dec</span><span class="p">,</span> <span class="n">distance</span> <span class="o">=</span> <span class="n">topocentric</span><span class="o">.</span><span class="n">radec</span><span class="p">(</span><span class="n">epoch</span><span class="o">=</span><span class="s1">&#39;date&#39;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">ra</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">dec</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>03h 20m 22.42s
+63deg 58&#39; 45.2&quot;
</pre></div>
</div>
<p>See <a class="reference internal" href="positions.html"><span class="doc">Positions</span></a> to learn more about these possibilities.</p>
</div>
<div class="section" id="find-a-satellites-range-rate">
<h2>Find a satellite’s range rate<a class="headerlink" href="#find-a-satellites-range-rate" title="Permalink to this headline">¶</a></h2>
<p>If you’re interested in the Doppler shift
of the radio signal from a satellite,
you’ll want to know the rate
at which the satellite’s range to your antenna is changing.
To determine the rate,
use the position method
<a class="reference internal" href="api-position.html#skyfield.positionlib.ICRF.frame_latlon_and_rates" title="skyfield.positionlib.ICRF.frame_latlon_and_rates"><code class="xref py py-meth docutils literal notranslate"><span class="pre">frame_latlon_and_rates()</span></code></a>
whose third return value will be the range
and whose sixth return value will be the range’s rate of change.</p>
<p>Our example satellite culminates
at around 20° above the horizon
just after 11:20pm&nbsp;UTC.
As expected,
its range reaches a minimum during that minute
and its range rate swaps from negative (drawing closer)
to positive (moving away).</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">t</span> <span class="o">=</span> <span class="n">ts</span><span class="o">.</span><span class="n">utc</span><span class="p">(</span><span class="mi">2014</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">17</span><span class="p">,</span> <span class="mi">23</span><span class="p">))</span>
<span class="n">pos</span> <span class="o">=</span> <span class="p">(</span><span class="n">satellite</span> <span class="o">-</span> <span class="n">bluffton</span><span class="p">)</span><span class="o">.</span><span class="n">at</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
<span class="n">_</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">the_range</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">range_rate</span> <span class="o">=</span> <span class="n">pos</span><span class="o">.</span><span class="n">frame_latlon_and_rates</span><span class="p">(</span><span class="n">bluffton</span><span class="p">)</span>

<span class="kn">from</span> <span class="nn">numpy</span> <span class="kn">import</span> <span class="n">array2string</span>
<span class="nb">print</span><span class="p">(</span><span class="n">array2string</span><span class="p">(</span><span class="n">the_range</span><span class="o">.</span><span class="n">km</span><span class="p">,</span> <span class="n">precision</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span> <span class="s1">&#39;km&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">array2string</span><span class="p">(</span><span class="n">range_rate</span><span class="o">.</span><span class="n">km_per_s</span><span class="p">,</span> <span class="n">precision</span><span class="o">=</span><span class="mi">2</span><span class="p">),</span> <span class="s1">&#39;km/s&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[1434.2 1190.5 1064.3 1097.3 1277.4 1553.6] km
[-4.74 -3.24 -0.84  1.9   3.95  5.14] km/s
</pre></div>
</div>
<p>I’ve chosen here to ask for coordinates
in the observer’s alt-az frame of reference,
but in fact the choice of coordinate system doesn’t matter
if we’re going to ignore everything but the range and range rate:
those two quantities should be independent
of the orientation of the spherical coordinate system we choose.</p>
</div>
<div class="section" id="find-when-a-satellite-is-in-sunlight">
<span id="satellite-is-sunlit"></span><h2>Find when a satellite is in sunlight<a class="headerlink" href="#find-when-a-satellite-is-in-sunlight" title="Permalink to this headline">¶</a></h2>
<p>A satellite is generally only visible to a ground observer
when there is still sunlight up at its altitude.
The satellite will visually disappear
when it enters the Earth’s shadow
and reappear when it emerges back into the sunlight.
If you are planning to observe a satellite visually,
rather than with radar or radio,
you will want to know which satellite passes are in sunlight.
Knowing a satellite’s sunlit periods
is also helpful when modeling satellite power and thermal cycles
as it goes in and out of eclipse.</p>
<p>Skyfield provides a simple geometric estimate for this
through the <a class="reference internal" href="api-position.html#skyfield.positionlib.ICRF.is_sunlit" title="skyfield.positionlib.ICRF.is_sunlit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">is_sunlit()</span></code></a> method.
Given an ephemeris with which it can compute the Sun’s position,
it will return <code class="docutils literal notranslate"><span class="pre">True</span></code> when the satellite is in sunlight
and <code class="docutils literal notranslate"><span class="pre">False</span></code> otherwise.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">eph</span> <span class="o">=</span> <span class="n">load</span><span class="p">(</span><span class="s1">&#39;de421.bsp&#39;</span><span class="p">)</span>

<span class="n">two_hours</span> <span class="o">=</span> <span class="n">ts</span><span class="o">.</span><span class="n">utc</span><span class="p">(</span><span class="mi">2014</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">120</span><span class="p">,</span> <span class="mi">20</span><span class="p">))</span>
<span class="n">sunlit</span> <span class="o">=</span> <span class="n">satellite</span><span class="o">.</span><span class="n">at</span><span class="p">(</span><span class="n">two_hours</span><span class="p">)</span><span class="o">.</span><span class="n">is_sunlit</span><span class="p">(</span><span class="n">eph</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">sunlit</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[ True  True False False  True  True]
</pre></div>
</div>
<p>As usual, you can use Python’s <code class="docutils literal notranslate"><span class="pre">zip()</span></code> builtin
if you want to loop across the times and corresponding values.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">ti</span><span class="p">,</span> <span class="n">sunlit_i</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">two_hours</span><span class="p">,</span> <span class="n">sunlit</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{}</span><span class="s1">  </span><span class="si">{}</span><span class="s1"> is in </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
        <span class="n">ti</span><span class="o">.</span><span class="n">utc_strftime</span><span class="p">(</span><span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1"> %H:%M&#39;</span><span class="p">),</span>
        <span class="n">satellite</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
        <span class="s1">&#39;sunlight&#39;</span> <span class="k">if</span> <span class="n">sunlit_i</span> <span class="k">else</span> <span class="s1">&#39;shadow&#39;</span><span class="p">,</span>
    <span class="p">))</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>2014-01-20 00:00  ISS (ZARYA) is in sunlight
2014-01-20 00:20  ISS (ZARYA) is in sunlight
2014-01-20 00:40  ISS (ZARYA) is in shadow
2014-01-20 01:00  ISS (ZARYA) is in shadow
2014-01-20 01:20  ISS (ZARYA) is in sunlight
2014-01-20 01:40  ISS (ZARYA) is in sunlight
</pre></div>
</div>
</div>
<div class="section" id="find-whether-the-earth-blocks-a-satellites-view">
<span id="is-behind-earth"></span><h2>Find whether the Earth blocks a satellite’s view<a class="headerlink" href="#find-whether-the-earth-blocks-a-satellites-view" title="Permalink to this headline">¶</a></h2>
<p>The Earth looms large in the sky of an Earth-orbiting satellite.
To plan an observation you may want to know
when a given celestial object is blocked by the Earth
and not visible from your satellite.
Skyfield provides a simple geometric estimate for this
through the <a class="reference internal" href="api-position.html#skyfield.positionlib.ICRF.is_behind_earth" title="skyfield.positionlib.ICRF.is_behind_earth"><code class="xref py py-meth docutils literal notranslate"><span class="pre">is_behind_earth()</span></code></a> method.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">eph</span> <span class="o">=</span> <span class="n">load</span><span class="p">(</span><span class="s1">&#39;de421.bsp&#39;</span><span class="p">)</span>
<span class="n">earth</span><span class="p">,</span> <span class="n">venus</span> <span class="o">=</span> <span class="n">eph</span><span class="p">[</span><span class="s1">&#39;earth&#39;</span><span class="p">],</span> <span class="n">eph</span><span class="p">[</span><span class="s1">&#39;venus&#39;</span><span class="p">]</span>

<span class="n">two_hours</span> <span class="o">=</span> <span class="n">ts</span><span class="o">.</span><span class="n">utc</span><span class="p">(</span><span class="mi">2014</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">120</span><span class="p">,</span> <span class="mi">20</span><span class="p">))</span>
<span class="n">p</span> <span class="o">=</span> <span class="p">(</span><span class="n">earth</span> <span class="o">+</span> <span class="n">satellite</span><span class="p">)</span><span class="o">.</span><span class="n">at</span><span class="p">(</span><span class="n">two_hours</span><span class="p">)</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">venus</span><span class="p">)</span><span class="o">.</span><span class="n">apparent</span><span class="p">()</span>
<span class="n">sunlit</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">is_behind_earth</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">sunlit</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[False False  True  True False False]
</pre></div>
</div>
<p>See the previous section for how to associate
each of these <code class="docutils literal notranslate"><span class="pre">True</span></code> and <code class="docutils literal notranslate"><span class="pre">False</span></code> values
with their corresponding time.</p>
</div>
<div class="section" id="avoid-calling-the-observe-method">
<h2>Avoid calling the observe method<a class="headerlink" href="#avoid-calling-the-observe-method" title="Permalink to this headline">¶</a></h2>
<p>When computing positions for the Sun, Moon, planets, and stars,
Skyfield encourages a far more fussy approach
than directly subtracting two vectors.
In those cases, the user is encouraged
to compute their current location with <code class="docutils literal notranslate"><span class="pre">at()</span></code>
and then call the <code class="docutils literal notranslate"><span class="pre">observe()</span></code> method on the result
so that Skyfield can correctly adjust the object’s position
for the time it takes light to travel.</p>
<ol class="arabic simple">
<li>This turns out to be expensive for Earth satellites,
however, because the routines
with which Skyfield computes satellite positions
are not currently very fast.</li>
<li>And it turns out to be useless,
because satellites are too close and move far too slowly
(at least compared to something like a planet)
for the light travel time to make any difference.</li>
</ol>
<p>How far off will your observations be
if you simply subtract your position vector
from the satellite’s vector, as encouraged above?
Let’s try the alternative and measure the difference.</p>
<p>To use the <a class="reference internal" href="api-position.html#skyfield.positionlib.Barycentric.observe" title="skyfield.positionlib.Barycentric.observe"><code class="xref any py py-meth docutils literal notranslate"><span class="pre">observe()</span></code></a> method,
you need a position measured all the way
from the Solar System Barycenter&nbsp;(SSB).
To anchor both our observer location
and that of the satellite to the SSB,
we can use vector addition with an ephemeris
that predicts the Solar System position of the Earth:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># OVERLY EXPENSIVE APPROACH - Compute both the satellite</span>
<span class="c1"># and observer positions relative to the Solar System</span>
<span class="c1"># barycenter (&quot;ssb&quot;), then call observe() to compensate</span>
<span class="c1"># for light-travel time.</span>

<span class="n">t</span> <span class="o">=</span> <span class="n">ts</span><span class="o">.</span><span class="n">utc</span><span class="p">(</span><span class="mi">2014</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span>
<span class="n">de421</span> <span class="o">=</span> <span class="n">load</span><span class="p">(</span><span class="s1">&#39;de421.bsp&#39;</span><span class="p">)</span>
<span class="n">earth</span> <span class="o">=</span> <span class="n">de421</span><span class="p">[</span><span class="s1">&#39;earth&#39;</span><span class="p">]</span>
<span class="n">ssb_bluffton</span> <span class="o">=</span> <span class="n">earth</span> <span class="o">+</span> <span class="n">bluffton</span>
<span class="n">ssb_satellite</span> <span class="o">=</span> <span class="n">earth</span> <span class="o">+</span> <span class="n">satellite</span>
<span class="n">topocentric2</span> <span class="o">=</span> <span class="n">ssb_bluffton</span><span class="o">.</span><span class="n">at</span><span class="p">(</span><span class="n">t</span><span class="p">)</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">ssb_satellite</span><span class="p">)</span><span class="o">.</span><span class="n">apparent</span><span class="p">()</span>
</pre></div>
</div>
<p>What difference has all of that work made?
We can subtract the resulting positions
to find out the distance between them:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># After all that work, how big is the difference, really?</span>

<span class="n">difference_km</span> <span class="o">=</span> <span class="p">(</span><span class="n">topocentric2</span> <span class="o">-</span> <span class="n">topocentric</span><span class="p">)</span><span class="o">.</span><span class="n">distance</span><span class="p">()</span><span class="o">.</span><span class="n">km</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Difference between the two positions:&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{0:.3f}</span><span class="s1"> km&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">difference_km</span><span class="p">))</span>

<span class="n">difference_angle</span> <span class="o">=</span> <span class="n">topocentric2</span><span class="o">.</span><span class="n">separation_from</span><span class="p">(</span><span class="n">topocentric</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Angle between the two positions in the sky:&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">difference_angle</span><span class="p">))</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Difference between the two positions:
0.087 km
Angle between the two positions in the sky:
00deg 00&#39; 04.6&quot;
</pre></div>
</div>
<p>And there you have it!</p>
<p>While satellite positions are only accurate to about a kilometer anyway,
accounting for light travel time only affected the position
in this case by less than an additional tenth of a kilometer.
This difference is not meaningful
when compared to the uncertainty
that is inherent in satellite positions to begin with,
so you should neglect it and simply subtract
GCRS-centered vectors instead as detailed above.</p>
</div>
<div class="section" id="detecting-propagation-errors">
<h2>Detecting Propagation Errors<a class="headerlink" href="#detecting-propagation-errors" title="Permalink to this headline">¶</a></h2>
<p>After building a satellite object,
you can examine the <em>epoch</em> date and time
when the TLE element set’s predictions are most accurate.
The <code class="docutils literal notranslate"><span class="pre">epoch</span></code> attribute is a <a class="reference internal" href="api-time.html#skyfield.timelib.Time" title="skyfield.timelib.Time"><code class="xref py py-class docutils literal notranslate"><span class="pre">Time</span></code></a>,
so it supports all of the standard Skyfield date methods:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">skyfield.api</span> <span class="kn">import</span> <span class="n">EarthSatellite</span>

<span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">GOCE</span>
<span class="s2">1 34602U 09013A   13314.96046236  .14220718  20669-5  50412-4 0   930</span>
<span class="s2">2 34602 096.5717 344.5256 0009826 296.2811 064.0942 16.58673376272979</span>
<span class="s2">&quot;&quot;&quot;</span>
<span class="n">lines</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">splitlines</span><span class="p">()</span>

<span class="n">sat</span> <span class="o">=</span> <span class="n">EarthSatellite</span><span class="p">(</span><span class="n">lines</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">lines</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">lines</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">sat</span><span class="o">.</span><span class="n">epoch</span><span class="o">.</span><span class="n">utc_jpl</span><span class="p">())</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>A.D. 2013-Nov-10 23:03:03.9479 UTC
</pre></div>
</div>
<p>Skyfield is willing to generate positions
for dates quite far from a satellite’s epoch,
even if they are not likely to be meaningful.
But it cannot generate a position
beyond the point where the elements stop making physical sense.
At that point, the satellite will return a position and velocity
<code class="docutils literal notranslate"><span class="pre">(nan,&nbsp;nan,&nbsp;nan)</span></code> where all of the quantities
are the special floating-point value <code class="docutils literal notranslate"><span class="pre">nan</span></code> which means <em>not-a-number</em>.</p>
<p>When a propagation error occurs and you get <code class="docutils literal notranslate"><span class="pre">nan</span></code> values,
you can examine the <code class="docutils literal notranslate"><span class="pre">message</span></code> attribute of the returned position
to learn the error that the SGP4 propagator encountered.</p>
<p>We can take as an example the satellite elements above.
They are the last elements ever issued for GOCE,
just before the satellite re-entered the atmosphere
after an extended and successful mission.
Because of the steep decay of its orbit,
the elements are valid over an unusually short period —
from just before noon on Saturday to just past noon on Tuesday:</p>
<img alt="_images/goce-reentry.png" src="_images/goce-reentry.png" />
<p>By asking for GOCE’s position just before or after this window,
we can learn about the propagation errors
that are limiting this TLE set’s predictions:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">geocentric</span> <span class="o">=</span> <span class="n">sat</span><span class="o">.</span><span class="n">at</span><span class="p">(</span><span class="n">ts</span><span class="o">.</span><span class="n">utc</span><span class="p">(</span><span class="mi">2013</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">9</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Before:&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">geocentric</span><span class="o">.</span><span class="n">xyz</span><span class="o">.</span><span class="n">km</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">geocentric</span><span class="o">.</span><span class="n">message</span><span class="p">)</span>

<span class="n">geocentric</span> <span class="o">=</span> <span class="n">sat</span><span class="o">.</span><span class="n">at</span><span class="p">(</span><span class="n">ts</span><span class="o">.</span><span class="n">utc</span><span class="p">(</span><span class="mi">2013</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">13</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">After:&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">geocentric</span><span class="o">.</span><span class="n">xyz</span><span class="o">.</span><span class="n">km</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">geocentric</span><span class="o">.</span><span class="n">message</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Before:
[nan nan nan]
mean eccentricity is outside the range 0.0 to 1.0

After:
[-5021.82658191   742.71506112  3831.57403957]
mrt is less than 1.0 which indicates the satellite has decayed
</pre></div>
</div>
<p>If you use a <code class="docutils literal notranslate"><span class="pre">Time</span></code> array to ask about an entire range of dates,
then <code class="docutils literal notranslate"><span class="pre">message</span></code> will be a sequence filled in with <code class="docutils literal notranslate"><span class="pre">None</span></code>
whenever the SGP4 propagator was successful
and otherwise recording the propagator error:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>

<span class="n">geocentric</span> <span class="o">=</span> <span class="n">sat</span><span class="o">.</span><span class="n">at</span><span class="p">(</span><span class="n">ts</span><span class="o">.</span><span class="n">utc</span><span class="p">(</span><span class="mi">2013</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="p">[</span><span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">13</span><span class="p">]))</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">geocentric</span><span class="o">.</span><span class="n">message</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[&#39;mean eccentricity is outside the range 0.0 to 1.0&#39;,
 None,
 None,
 None,
 &#39;mrt is less than 1.0 which indicates the satellite has decayed&#39;]
</pre></div>
</div>
</div>
<div class="section" id="build-a-satellite-with-a-specific-gravity-model">
<span id="from-satrec"></span><h2>Build a satellite with a specific gravity model<a class="headerlink" href="#build-a-satellite-with-a-specific-gravity-model" title="Permalink to this headline">¶</a></h2>
<p>If your satellite elements
are designed for another gravity model besides the default WGS72 model,
then use the underlying <code class="docutils literal notranslate"><span class="pre">sgp4</span></code> module to build the satellite.
It will let you customize the choice of gravity model:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sgp4.api</span> <span class="kn">import</span> <span class="n">Satrec</span><span class="p">,</span> <span class="n">WGS84</span>
<span class="n">satrec</span> <span class="o">=</span> <span class="n">Satrec</span><span class="o">.</span><span class="n">twoline2rv</span><span class="p">(</span><span class="n">line1</span><span class="p">,</span> <span class="n">line2</span><span class="p">,</span> <span class="n">WGS84</span><span class="p">)</span>
<span class="n">sat</span> <span class="o">=</span> <span class="n">EarthSatellite</span><span class="o">.</span><span class="n">from_satrec</span><span class="p">(</span><span class="n">satrec</span><span class="p">,</span> <span class="n">ts</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="build-a-satellite-from-orbital-elements">
<h2>Build a satellite from orbital elements<a class="headerlink" href="#build-a-satellite-from-orbital-elements" title="Permalink to this headline">¶</a></h2>
<p>If you are starting with raw satellite orbital parameters
instead of TLE text,
you will want to interact directly
with the <a class="reference external" href="https://github.com/brandon-rhodes/python-sgp4">sgp4</a> library
that Skyfield uses for its low-level satellite calculations.</p>
<p>The underlying library provides access to a low-level constructor
that builds a satellite model directly from numeric orbital parameters:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sgp4.api</span> <span class="kn">import</span> <span class="n">Satrec</span><span class="p">,</span> <span class="n">WGS72</span>

<span class="n">satrec</span> <span class="o">=</span> <span class="n">Satrec</span><span class="p">()</span>
<span class="n">satrec</span><span class="o">.</span><span class="n">sgp4init</span><span class="p">(</span>
    <span class="n">WGS72</span><span class="p">,</span>           <span class="c1"># gravity model</span>
    <span class="s1">&#39;i&#39;</span><span class="p">,</span>             <span class="c1"># &#39;a&#39; = old AFSPC mode, &#39;i&#39; = improved mode</span>
    <span class="mi">5</span><span class="p">,</span>               <span class="c1"># satnum: Satellite number</span>
    <span class="mf">18441.785</span><span class="p">,</span>       <span class="c1"># epoch: days since 1949 December 31 00:00 UT</span>
    <span class="mf">2.8098e-05</span><span class="p">,</span>      <span class="c1"># bstar: drag coefficient (/earth radii)</span>
    <span class="mf">6.969196665e-13</span><span class="p">,</span> <span class="c1"># ndot: ballistic coefficient (radians/minute^2)</span>
    <span class="mf">0.0</span><span class="p">,</span>             <span class="c1"># nddot: second derivative of mean motion (radians/minute^3)</span>
    <span class="mf">0.1859667</span><span class="p">,</span>       <span class="c1"># ecco: eccentricity</span>
    <span class="mf">5.7904160274885</span><span class="p">,</span> <span class="c1"># argpo: argument of perigee (radians)</span>
    <span class="mf">0.5980929187319</span><span class="p">,</span> <span class="c1"># inclo: inclination (radians)</span>
    <span class="mf">0.3373093125574</span><span class="p">,</span> <span class="c1"># mo: mean anomaly (radians)</span>
    <span class="mf">0.0472294454407</span><span class="p">,</span> <span class="c1"># no_kozai: mean motion (radians/minute)</span>
    <span class="mf">6.0863854713832</span><span class="p">,</span> <span class="c1"># nodeo: right ascension of ascending node (radians)</span>
<span class="p">)</span>
</pre></div>
</div>
<p>If you need any more details,
this <code class="docutils literal notranslate"><span class="pre">sgp4init</span></code> method is documented in the
<a class="reference external" href="https://pypi.org/project/sgp4/#providing-your-own-elements">Providing your own elements</a>
section of the sgp4 library’s documentation on the Python Packaging Index.</p>
<p>To wrap this low-level satellite model in a Skyfield object,
call this special constructor:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">sat</span> <span class="o">=</span> <span class="n">EarthSatellite</span><span class="o">.</span><span class="n">from_satrec</span><span class="p">(</span><span class="n">satrec</span><span class="p">,</span> <span class="n">ts</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Satellite number:&#39;</span><span class="p">,</span> <span class="n">sat</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">satnum</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Epoch:&#39;</span><span class="p">,</span> <span class="n">sat</span><span class="o">.</span><span class="n">epoch</span><span class="o">.</span><span class="n">utc_jpl</span><span class="p">())</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Satellite number: 5
Epoch: A.D. 2000-Jun-27 18:50:24.0000 UTC
</pre></div>
</div>
<p>The result should be a satellite object that behaves
exactly as though it had been loaded from TLE lines.</p>
</div>
</div>

  </body>
</html>